(()=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _toPropertyKey(t){var e=function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_typeof(e)?e:e+""}var t=function(){function Api(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=t,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(e=r.headers)&&void 0!==e?e:{})}}return function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Api,[{key:"handleResponse",value:function handleResponse(t){return t.ok?t.json():t.json().then((function(e){var r;return Promise.reject(null!==(r=e.error)&&void 0!==r?r:t.statusText)}))}},{key:"get",value:function get(t){return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:r,body:JSON.stringify(e)})).then(this.handleResponse)}}]),Api}();function Component_typeof(t){return Component_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Component_typeof(t)}function Component_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Component_toPropertyKey(o.key),o)}}function Component_toPropertyKey(t){var e=function Component_toPrimitive(t,e){if("object"!=Component_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Component_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Component_typeof(e)?e:e+""}var e=function(){function Component(t){!function Component_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Component),this.container=t}return function Component_createClass(t,e,r){return e&&Component_defineProperties(t.prototype,e),r&&Component_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Component,[{key:"render",value:function render(t){return Object.assign(this,null!=t?t:{}),this.container}}]),Component}();function CardsContainer_typeof(t){return CardsContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CardsContainer_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=Array(e);r<e;r++)o[r]=t[r];return o}function CardsContainer_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,CardsContainer_toPropertyKey(o.key),o)}}function CardsContainer_toPropertyKey(t){var e=function CardsContainer_toPrimitive(t,e){if("object"!=CardsContainer_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=CardsContainer_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CardsContainer_typeof(e)?e:e+""}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,o=_getPrototypeOf(t);if(e){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function _possibleConstructorReturn(t,e){if(e&&("object"==CardsContainer_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var r=function(t){!function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}(CardsContainer,t);var e=_createSuper(CardsContainer);function CardsContainer(t){var r;return function CardsContainer_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,CardsContainer),(r=e.call(this,t)).container=t,r}return function CardsContainer_createClass(t,e,r){return e&&CardsContainer_defineProperties(t.prototype,e),r&&CardsContainer_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(CardsContainer,[{key:"catalog",set:function set(t){var e;(e=this.container).replaceChildren.apply(e,_toConsumableArray(t))}}]),CardsContainer}(e),o="".concat("","/api/weblarek"),n="".concat("","/content/weblarek");function AppApi_typeof(t){return AppApi_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AppApi_typeof(t)}function AppApi_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,AppApi_toPropertyKey(o.key),o)}}function AppApi_toPropertyKey(t){var e=function AppApi_toPrimitive(t,e){if("object"!=AppApi_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=AppApi_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AppApi_typeof(e)?e:e+""}var a=function(){function AppApi(t){!function AppApi_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,AppApi),this._baseApi=t}return function AppApi_createClass(t,e,r){return e&&AppApi_defineProperties(t.prototype,e),r&&AppApi_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(AppApi,[{key:"getProducts",value:function getProducts(){return this._baseApi.get("/product").then((function(t){return t.items}))}},{key:"getProductData",value:function getProductData(t){return this._baseApi.get("/product/".concat(t)).then((function(t){return t}))}}]),AppApi}();function CardsData_typeof(t){return CardsData_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CardsData_typeof(t)}function CardsData_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,CardsData_toPropertyKey(o.key),o)}}function CardsData_toPropertyKey(t){var e=function CardsData_toPrimitive(t,e){if("object"!=CardsData_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=CardsData_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CardsData_typeof(e)?e:e+""}var i=function(){function CardsData(t){!function CardsData_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,CardsData),this.events=t}return function CardsData_createClass(t,e,r){return e&&CardsData_defineProperties(t.prototype,e),r&&CardsData_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(CardsData,[{key:"cards",get:function get(){return this._cards},set:function set(t){this._cards=t}},{key:"preview",set:function set(t){t?this.events.emit("card:selected"):this._preview=null}}]),CardsData}();function events_typeof(t){return events_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},events_typeof(t)}function events_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,events_toPropertyKey(o.key),o)}}function events_toPropertyKey(t){var e=function events_toPrimitive(t,e){if("object"!=events_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=events_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==events_typeof(e)?e:e+""}var s=function(){function EventEmitter(){!function events_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function events_createClass(t,e,r){return e&&events_defineProperties(t.prototype,e),r&&events_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(EventEmitter,[{key:"on",value:function on(t,e){var r;this._events.has(t)||this._events.set(t,new Set),null===(r=this._events.get(t))||void 0===r||r.add(e)}},{key:"off",value:function off(t,e){var r;this._events.has(t)&&(this._events.get(t).delete(e),0===(null===(r=this._events.get(t))||void 0===r?void 0:r.size)&&this._events.delete(t))}},{key:"emit",value:function emit(t,e){this._events.forEach((function(r,o){"*"===o&&r.forEach((function(r){return r({eventName:t,data:e})})),(o instanceof RegExp&&o.test(t)||o===t)&&r.forEach((function(t){return t(e)}))}))}},{key:"onAll",value:function onAll(t){this.on("*",t)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(t,e){var r=this;return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.emit(t,Object.assign(Object.assign({},o||{}),e||{}))}}}]),EventEmitter}();function isSelector(t){return"string"==typeof t&&t.length>1}function ensureElement(t,e){if(isSelector(t)){var r=function ensureAllElements(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(t))return Array.from(e.querySelectorAll(t));if(t instanceof NodeList)return Array.from(t);if(Array.isArray(t))return t;throw new Error("Unknown selector element")}(t,e);if(r.length>1&&console.warn("selector ".concat(t," return more then one element")),0===r.length)throw new Error("selector ".concat(t," return nothing"));return r.pop()}if(t instanceof HTMLElement)return t;throw new Error("Unknown selector element")}function cloneTemplate(t){return ensureElement(t).content.firstElementChild.cloneNode(!0)}function setElementProperty(t,e,r){t&&(t[e]=r)}function isEmptyValidation(t){return!t.value}function Card_typeof(t){return Card_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Card_typeof(t)}function Card_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Card_toPropertyKey(o.key),o)}}function Card_toPropertyKey(t){var e=function Card_toPrimitive(t,e){if("object"!=Card_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Card_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Card_typeof(e)?e:e+""}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=function _superPropBase(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Card_getPrototypeOf(t)););return t}(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},_get.apply(null,arguments)}function Card_setPrototypeOf(t,e){return Card_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Card_setPrototypeOf(t,e)}function Card_createSuper(t){var e=Card_isNativeReflectConstruct();return function(){var r,o=Card_getPrototypeOf(t);if(e){var n=Card_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function Card_possibleConstructorReturn(t,e){if(e&&("object"==Card_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Card_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Card_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Card_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Card_getPrototypeOf(t){return Card_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Card_getPrototypeOf(t)}var c=function(t){!function Card_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Card_setPrototypeOf(t,e)}(Card,t);var e=Card_createSuper(Card);function Card(t,r){var o;return function Card_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Card),(o=e.call(this,t)).container=t,o.events=r,o.cardDescription=o.container.querySelector(".card__text"),o.cardImage=o.container.querySelector(".card__image"),o.cardTitle=o.container.querySelector(".card__title"),o.cardCategory=o.container.querySelector(".card__category"),o.cardPrice=o.container.querySelector(".card__price"),t.addEventListener("click",(function(){o.events.emit("cardModal:opened",{card:o.cardData})})),o}return function Card_createClass(t,e,r){return e&&Card_defineProperties(t.prototype,e),r&&Card_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Card,[{key:"render",value:function render(t){return t?(this.cardData=t,Object.assign(this,t),_get(Card_getPrototypeOf(Card.prototype),"render",this).call(this,t)):this.container}},{key:"title",set:function set(t){setElementProperty(this.cardTitle,"textContent",t)}},{key:"description",set:function set(t){setElementProperty(this.cardDescription,"textContent",t)}},{key:"image",set:function set(t){setElementProperty(this.cardImage,"src","".concat(n).concat(t)),setElementProperty(this.cardImage,"alt",this.title?this.title:"Изображение товара")}},{key:"category",set:function set(t){setElementProperty(this.cardCategory,"textContent",t)}},{key:"price",set:function set(t){setElementProperty(this.cardPrice,"textContent",t?"".concat(t," синапсов"):"Бесценно")}},{key:"id",set:function set(t){this.cardId=t}}]),Card}(e);function BasketItem_typeof(t){return BasketItem_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BasketItem_typeof(t)}function BasketItem_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,BasketItem_toPropertyKey(o.key),o)}}function BasketItem_toPropertyKey(t){var e=function BasketItem_toPrimitive(t,e){if("object"!=BasketItem_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=BasketItem_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BasketItem_typeof(e)?e:e+""}function BasketItem_get(){return BasketItem_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=function BasketItem_superPropBase(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=BasketItem_getPrototypeOf(t)););return t}(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},BasketItem_get.apply(null,arguments)}function BasketItem_setPrototypeOf(t,e){return BasketItem_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},BasketItem_setPrototypeOf(t,e)}function BasketItem_createSuper(t){var e=BasketItem_isNativeReflectConstruct();return function(){var r,o=BasketItem_getPrototypeOf(t);if(e){var n=BasketItem_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function BasketItem_possibleConstructorReturn(t,e){if(e&&("object"==BasketItem_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function BasketItem_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function BasketItem_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(BasketItem_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function BasketItem_getPrototypeOf(t){return BasketItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BasketItem_getPrototypeOf(t)}var l=function(t){!function BasketItem_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BasketItem_setPrototypeOf(t,e)}(BasketItem,t);var e=BasketItem_createSuper(BasketItem);function BasketItem(t,r){var o;return function BasketItem_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BasketItem),(o=e.call(this,t)).events=r,o.itemIndex=t.querySelector(".basket__item-index"),o.itemTitle=t.querySelector(".card__title"),o.itemPrice=t.querySelector(".card__price"),o.deleteItemButton=t.querySelector(".basket__item-delete"),o.deleteItemButton.addEventListener("click",(function(){o.events.emit("product:deleteFromBasket",{data:o._id})})),o}return function BasketItem_createClass(t,e,r){return e&&BasketItem_defineProperties(t.prototype,e),r&&BasketItem_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(BasketItem,[{key:"render",value:function render(t){return t?(setElementProperty(this.itemIndex,"textContent","".concat(t.index)),this._amount=t.amount||1,Object.assign(this,t),BasketItem_get(BasketItem_getPrototypeOf(BasketItem.prototype),"render",this).call(this,t)):this.container}},{key:"title",set:function set(t){setElementProperty(this.itemTitle,"textContent",t)}},{key:"price",set:function set(t){this._price=t*this._amount,setElementProperty(this.itemPrice,"textContent",this._price?"".concat(this._price," синапсов"):"Бесценно")}},{key:"id",set:function set(t){this._id=t}},{key:"getElement",value:function getElement(){return this.container}}]),BasketItem}(e);function Modal_typeof(t){return Modal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Modal_typeof(t)}function Modal_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Modal_toPropertyKey(o.key),o)}}function Modal_toPropertyKey(t){var e=function Modal_toPrimitive(t,e){if("object"!=Modal_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Modal_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Modal_typeof(e)?e:e+""}function Modal_setPrototypeOf(t,e){return Modal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Modal_setPrototypeOf(t,e)}function Modal_createSuper(t){var e=Modal_isNativeReflectConstruct();return function(){var r,o=Modal_getPrototypeOf(t);if(e){var n=Modal_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function Modal_possibleConstructorReturn(t,e){if(e&&("object"==Modal_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Modal_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Modal_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Modal_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Modal_getPrototypeOf(t){return Modal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Modal_getPrototypeOf(t)}var u=function(t){!function Modal_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Modal_setPrototypeOf(t,e)}(Modal,t);var e=Modal_createSuper(Modal);function Modal(t,r){var o;return function Modal_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Modal),(o=e.call(this,t)).container=t,o.rootElement=document.querySelector("#modal-container"),o.contentElement=o.rootElement.querySelector(".modal__content"),o.closeButton=o.rootElement.querySelector(".modal__close"),o.events=r,o.closeButton.addEventListener("click",(function(){return o.events.emit("modal:closed")})),o.rootElement.addEventListener("click",(function(t){t.target.classList.contains("modal")&&o.events.emit("modal:closed")})),o.events.on("modal:closed",(function(){return o.close()})),o}return function Modal_createClass(t,e,r){return e&&Modal_defineProperties(t.prototype,e),r&&Modal_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Modal,[{key:"open",value:function open(t){this.render(t),this.contentElement.innerHTML="",this.contentElement.appendChild(this.container),this.rootElement.classList.add("modal_active")}},{key:"close",value:function close(){this.rootElement.classList.remove("modal_active"),this.contentElement.innerHTML=""}},{key:"getData",value:function getData(){return this.data}},{key:"setData",value:function setData(t){this.data=t}}]),Modal}(e);function BasketModal_typeof(t){return BasketModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BasketModal_typeof(t)}function BasketModal_slicedToArray(t,e){return function BasketModal_arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function BasketModal_iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,n,a,i,s=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(s.push(o.value),s.length!==e);c=!0);}catch(t){l=!0,n=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw n}}return s}}(t,e)||function BasketModal_unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return BasketModal_arrayLikeToArray(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?BasketModal_arrayLikeToArray(t,e):void 0}}(t,e)||function BasketModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BasketModal_arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=Array(e);r<e;r++)o[r]=t[r];return o}function BasketModal_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,BasketModal_toPropertyKey(o.key),o)}}function BasketModal_toPropertyKey(t){var e=function BasketModal_toPrimitive(t,e){if("object"!=BasketModal_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=BasketModal_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BasketModal_typeof(e)?e:e+""}function BasketModal_setPrototypeOf(t,e){return BasketModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},BasketModal_setPrototypeOf(t,e)}function BasketModal_createSuper(t){var e=BasketModal_isNativeReflectConstruct();return function(){var r,o=BasketModal_getPrototypeOf(t);if(e){var n=BasketModal_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function BasketModal_possibleConstructorReturn(t,e){if(e&&("object"==BasketModal_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function BasketModal_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function BasketModal_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(BasketModal_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function BasketModal_getPrototypeOf(t){return BasketModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BasketModal_getPrototypeOf(t)}var f=document.querySelector("#card-basket"),p=function(t){!function BasketModal_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BasketModal_setPrototypeOf(t,e)}(BasketModal,t);var e=BasketModal_createSuper(BasketModal);function BasketModal(t,r){var o;return function BasketModal_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BasketModal),(o=e.call(this,t,r)).container=t,o.renderedItemsId=[],o.itemsDataCache=new Map,o.events=r,o.basketList=t.querySelector(".basket__list"),o.basketTotalPriceElement=t.querySelector(".basket__price"),o.makeOrderButton=t.querySelector(".basket__button"),o.basketTotalPriceValue=0,o.makeOrderButton.addEventListener("click",(function(){var t=Array.from(o.itemsDataCache.values()).filter((function(t){return o.renderedItemsId.includes(t.id)})).map((function(t){return Object.assign(Object.assign({},t),{amount:t.amount})}));o.events.emit("order:goToDetails",t)})),o}return function BasketModal_createClass(t,e,r){return e&&BasketModal_defineProperties(t.prototype,e),r&&BasketModal_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(BasketModal,[{key:"updateBasket",value:function updateBasket(t,e){var r=this,o=Array.from(t);o.length?this.makeOrderButton.disabled=!1:(setElementProperty(this.basketTotalPriceElement,"textContent","0 синапсов"),this.makeOrderButton.disabled=!0);var n=1;this.basketTotalPriceValue=0,this.renderedItemsId=this.renderedItemsId.filter((function(e){return t.has(e)})),this.basketList.innerHTML="",o.forEach((function(t){var o=BasketModal_slicedToArray(t,2),a=o[0],i=o[1];if(r.itemsDataCache.has(a)){var s=r.itemsDataCache.get(a);r.createBasketItem(Object.assign(Object.assign({},s),{amount:i}),n,i),n++}else e.getProductData(a).then((function(t){r.itemsDataCache.set(a,Object.assign(Object.assign({},t),{amount:i})),r.createBasketItem(Object.assign(Object.assign({},t),{amount:i}),n,i),n++}))}))}},{key:"createBasketItem",value:function createBasketItem(t,e,r){this.itemsDataCache.set(t.id,Object.assign(Object.assign({},t),{amount:r}));var o=new l(cloneTemplate(f),this.events);o.render(Object.assign(Object.assign({},t),{index:e,amount:r})),this.basketList.appendChild(o.getElement()),this.renderedItemsId.push(t.id),t.price&&(this.basketTotalPriceValue+=t.price*r,setElementProperty(this.basketTotalPriceElement,"textContent","".concat(this.basketTotalPriceValue," синапсов")))}},{key:"items",set:function set(t){this.itemsInBasket=t}}]),BasketModal}(u);function BasketModel_typeof(t){return BasketModel_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BasketModel_typeof(t)}function BasketModel_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,BasketModel_toPropertyKey(o.key),o)}}function BasketModel_toPropertyKey(t){var e=function BasketModel_toPrimitive(t,e){if("object"!=BasketModel_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=BasketModel_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BasketModel_typeof(e)?e:e+""}var y=function(){function BasketModel(t){!function BasketModel_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BasketModel),this.items=new Map,this.events=t}return function BasketModel_createClass(t,e,r){return e&&BasketModel_defineProperties(t.prototype,e),r&&BasketModel_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(BasketModel,[{key:"add",value:function add(t){this.items.has(t)||this.items.set(t,0),this.items.set(t,this.items.get(t)+1),this.events.emit("basket:changed")}},{key:"remove",value:function remove(t){this.items.has(t)&&this.items.get(t)>0&&(this.items.set(t,this.items.get(t)-1),0===this.items.get(t)&&this.items.delete(t),this.events.emit("basket:changed"))}},{key:"clear",value:function clear(){this.items.clear()}}]),BasketModel}();function Basket_typeof(t){return Basket_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Basket_typeof(t)}function Basket_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Basket_toPropertyKey(o.key),o)}}function Basket_toPropertyKey(t){var e=function Basket_toPrimitive(t,e){if("object"!=Basket_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Basket_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Basket_typeof(e)?e:e+""}function Basket_setPrototypeOf(t,e){return Basket_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Basket_setPrototypeOf(t,e)}function Basket_createSuper(t){var e=Basket_isNativeReflectConstruct();return function(){var r,o=Basket_getPrototypeOf(t);if(e){var n=Basket_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function Basket_possibleConstructorReturn(t,e){if(e&&("object"==Basket_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Basket_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Basket_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Basket_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Basket_getPrototypeOf(t){return Basket_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Basket_getPrototypeOf(t)}var d=function(t){!function Basket_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Basket_setPrototypeOf(t,e)}(Basket,t);var e=Basket_createSuper(Basket);function Basket(t){var r;return function Basket_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Basket),(r=e.call(this,t)).currentAmount=0,r.openBasketButton=document.querySelector(".header__basket"),r.itemsInBasketAmount=r.openBasketButton.querySelector(".header__basket-counter"),r.openBasketButton.addEventListener("click",(function(){r.events.emit("basketModal:opened")})),r.events.on("product:addToBasket",(function(){setElementProperty(r.itemsInBasketAmount,"textContent","".concat(++r.currentAmount))})),r.events.on("product:deleteFromBasket",(function(){setElementProperty(r.itemsInBasketAmount,"textContent","".concat(--r.currentAmount))})),r}return function Basket_createClass(t,e,r){return e&&Basket_defineProperties(t.prototype,e),r&&Basket_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Basket,[{key:"clear",value:function clear(){setElementProperty(this.itemsInBasketAmount,"textContent","0"),this.items.clear()}}]),Basket}(y);function CardModal_typeof(t){return CardModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CardModal_typeof(t)}function CardModal_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,CardModal_toPropertyKey(o.key),o)}}function CardModal_toPropertyKey(t){var e=function CardModal_toPrimitive(t,e){if("object"!=CardModal_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=CardModal_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CardModal_typeof(e)?e:e+""}function CardModal_setPrototypeOf(t,e){return CardModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},CardModal_setPrototypeOf(t,e)}function CardModal_createSuper(t){var e=CardModal_isNativeReflectConstruct();return function(){var r,o=CardModal_getPrototypeOf(t);if(e){var n=CardModal_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function CardModal_possibleConstructorReturn(t,e){if(e&&("object"==CardModal_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function CardModal_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function CardModal_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(CardModal_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function CardModal_getPrototypeOf(t){return CardModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},CardModal_getPrototypeOf(t)}var m=function(t){!function CardModal_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CardModal_setPrototypeOf(t,e)}(CardModal,t);var e=CardModal_createSuper(CardModal);function CardModal(t,r){var o;return function CardModal_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,CardModal),(o=e.call(this,t,r)).modalTitle=t.querySelector(".card__title"),o.modalDescription=t.querySelector(".card__text"),o.modalImage=t.querySelector(".card__image"),o.modalCategory=t.querySelector(".card__category"),o.modalPrice=t.querySelector(".card__price"),o.addToBasketButton=t.querySelector(".card__button"),o.addToBasketButton.addEventListener("click",(function(){o.events.emit("product:addToBasket",{data:o.cardId})})),o}return function CardModal_createClass(t,e,r){return e&&CardModal_defineProperties(t.prototype,e),r&&CardModal_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(CardModal,[{key:"title",set:function set(t){setElementProperty(this.modalTitle,"textContent",t)}},{key:"description",set:function set(t){setElementProperty(this.modalDescription,"textContent",null!=t?t:"Нет описания")}},{key:"image",set:function set(t){setElementProperty(this.modalImage,"src","".concat(n).concat(t))}},{key:"category",set:function set(t){setElementProperty(this.modalCategory,"textContent",t)}},{key:"price",set:function set(t){setElementProperty(this.modalPrice,"textContent",t?"".concat(t," синапсов"):"Бесценно")}},{key:"id",set:function set(t){this.cardId=t}}]),CardModal}(u);function OrderDetailsModal_typeof(t){return OrderDetailsModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OrderDetailsModal_typeof(t)}function OrderDetailsModal_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,OrderDetailsModal_toPropertyKey(o.key),o)}}function OrderDetailsModal_toPropertyKey(t){var e=function OrderDetailsModal_toPrimitive(t,e){if("object"!=OrderDetailsModal_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=OrderDetailsModal_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OrderDetailsModal_typeof(e)?e:e+""}function OrderDetailsModal_setPrototypeOf(t,e){return OrderDetailsModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},OrderDetailsModal_setPrototypeOf(t,e)}function OrderDetailsModal_createSuper(t){var e=OrderDetailsModal_isNativeReflectConstruct();return function(){var r,o=OrderDetailsModal_getPrototypeOf(t);if(e){var n=OrderDetailsModal_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function OrderDetailsModal_possibleConstructorReturn(t,e){if(e&&("object"==OrderDetailsModal_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function OrderDetailsModal_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function OrderDetailsModal_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(OrderDetailsModal_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function OrderDetailsModal_getPrototypeOf(t){return OrderDetailsModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},OrderDetailsModal_getPrototypeOf(t)}var _=function(t){!function OrderDetailsModal_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OrderDetailsModal_setPrototypeOf(t,e)}(OrderDetailsModal,t);var e=OrderDetailsModal_createSuper(OrderDetailsModal);function OrderDetailsModal(t,r){var o;return function OrderDetailsModal_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,OrderDetailsModal),(o=e.call(this,t,r)).container=t,o.currentlySelectedButton=null,o.events=r,o.orderButton=t.querySelector(".order__button"),o.addressInput=t.querySelector(".form__input"),o.errorFields=t.querySelector(".form__errors"),o.paymentMethodButtons=t.querySelectorAll(".button_alt"),o.showEmptyFieldError(),o.events.on("order:goToDetails",(function(t){o.paymentButtonsStates(),o.items=t})),o.addressInput.addEventListener("input",(function(){isEmptyValidation(o.addressInput)?(o.showEmptyFieldError(),o.toggleButtonState()):(o.errorFields.textContent="",o.toggleButtonState())})),!o.errorFields&&o.currentlySelectedButton&&(o.orderButton.disabled=!1),o.orderButton.addEventListener("click",(function(t){t.preventDefault();var e={paymentMethod:o.getData().paymentMethod,address:o.addressInput.value,items:o.items};o.events.emit("order:goToContacts",{order:e})})),o}return function OrderDetailsModal_createClass(t,e,r){return e&&OrderDetailsModal_defineProperties(t.prototype,e),r&&OrderDetailsModal_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(OrderDetailsModal,[{key:"paymentButtonsStates",value:function paymentButtonsStates(){var t=this;this.paymentMethodButtons.forEach((function(e){e.addEventListener("click",(function(){t.currentlySelectedButton&&(t.currentlySelectedButton.classList.add("button_alt"),t.toggleButtonState()),e.classList.remove("button_alt"),t.currentlySelectedButton=e,t.setData(Object.assign(Object.assign({},t.getData()),{paymentMethod:e.getAttribute("name")}))}))}))}},{key:"toggleButtonState",value:function toggleButtonState(){!isEmptyValidation(this.addressInput)&&this.currentlySelectedButton?this.orderButton.disabled=!1:this.orderButton.disabled=!0}},{key:"showEmptyFieldError",value:function showEmptyFieldError(){setElementProperty(this.errorFields,"textContent","Поле ввода не может быть пустым.")}}]),OrderDetailsModal}(u);function ContactsModal_typeof(t){return ContactsModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ContactsModal_typeof(t)}function ContactsModal_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,ContactsModal_toPropertyKey(o.key),o)}}function ContactsModal_toPropertyKey(t){var e=function ContactsModal_toPrimitive(t,e){if("object"!=ContactsModal_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=ContactsModal_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ContactsModal_typeof(e)?e:e+""}function ContactsModal_setPrototypeOf(t,e){return ContactsModal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ContactsModal_setPrototypeOf(t,e)}function ContactsModal_createSuper(t){var e=ContactsModal_isNativeReflectConstruct();return function(){var r,o=ContactsModal_getPrototypeOf(t);if(e){var n=ContactsModal_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function ContactsModal_possibleConstructorReturn(t,e){if(e&&("object"==ContactsModal_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function ContactsModal_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ContactsModal_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ContactsModal_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function ContactsModal_getPrototypeOf(t){return ContactsModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ContactsModal_getPrototypeOf(t)}var b=function(t){!function ContactsModal_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ContactsModal_setPrototypeOf(t,e)}(ContactsModal,t);var e=ContactsModal_createSuper(ContactsModal);function ContactsModal(t,r){var o;return function ContactsModal_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ContactsModal),(o=e.call(this,t,r)).container=t,o.events=r,o.emailInput=t.querySelector('input[name="email"]'),o.phoneNumberInput=t.querySelector('input[name="phone"]'),o.submitButton=t.querySelector('button[type="submit"]'),o.emailInput.addEventListener("input",(function(){return o.validateForm()})),o.phoneNumberInput.addEventListener("input",(function(){return o.validateForm()})),r.on("order:goToContacts",(function(t){o.setData({order:t.order,email:t.email,phone:t.phone}),o.validateForm()})),o.submitButton.addEventListener("click",(function(t){t.preventDefault();var e={order:o.getData().order,email:o.emailInput.value,phone:o.phoneNumberInput.value};o.events.emit("order:submit",e)})),o}return function ContactsModal_createClass(t,e,r){return e&&ContactsModal_defineProperties(t.prototype,e),r&&ContactsModal_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(ContactsModal,[{key:"validateForm",value:function validateForm(){var t=isEmptyValidation(this.emailInput),e=this.validatePhoneNumber(),r=this.emailInput.value;this.submitButton.disabled=t||!e||!r.includes("@")||!r.includes(".")}},{key:"validatePhoneNumber",value:function validatePhoneNumber(){return 11===this.phoneNumberInput.value.replace(/\D/g,"").length}}]),ContactsModal}(u),v=new s,h=new a(new t(o,{headers:{"Content-Type":"application/json"}})),C=new i(v),P=new d(v),O=document.querySelector("#card-catalog"),k=document.querySelector("#card-preview"),g=document.querySelector("#basket"),M=document.querySelector("#order"),B=document.querySelector("#contacts"),w=new r(document.querySelector(".gallery")),S=new m(cloneTemplate(k),v),j=new p(cloneTemplate(g),v),E=new _(cloneTemplate(M),v),T=new b(cloneTemplate(B),v);h.getProducts().then((function(t){C.cards=t,v.emit("initialData:loaded")})).catch((function(t){console.error("Ошибка загрузки карточек:",t)})),v.on("initialData:loaded",(function(){var t=C.cards.map((function(t){return new c(cloneTemplate(O),v).render(t)}));w.render({catalog:t})})),v.on("cardModal:opened",(function(t){S.open(t.card)})),v.on("basketModal:opened",(function(){j.open(),j.updateBasket(P.items,h)})),v.on("product:addToBasket",(function(t){var e=Object.values(t)[0];h.getProductData(e).then((function(t){P.add(t.id)}))})),v.on("product:deleteFromBasket",(function(t){var e=Object.values(t)[0];P.remove(e),j.updateBasket(P.items,h)})),v.on("order:goToDetails",(function(){E.open()})),v.on("order:goToContacts",(function(){T.open()})),v.on("order:submit",(function(t){console.log("Полные данные заказа:",t),T.close(),P.clear()}))})();
//# sourceMappingURL=main.js.map